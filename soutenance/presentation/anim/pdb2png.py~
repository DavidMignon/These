#!/usr/bin/env python
# -*- noplot -*-
# from https://github.com/ssalentin/pymol-animations/blob/master/tutorials/basics/*.py #

import __main__
__main__.pymol_argv = [ 'pymol', '-qc'] # Quiet and no GUI

import sys, time, os
import pymol

pymol.finish_launching()

##
# Read User Input
spath = os.path.abspath(sys.argv[1])
sname = spath.split('/')[-1].split('.')[0]

# Load Structures

pymol.cmd.load(spath, sname)
pymol.cmd.disable("all")
pymol.cmd.enable(sname)
pymol.cmd.show_as('sticks',sname)
pymol.cmd.zoom( sname,buffer=2.0,state=0, complete=1)
pymol.cmd.bg_color(color="white")
pymol.cmd.select('bb', 'name c+o+n+ca')
pymol.cmd.color('white','bb')
pymol.cmd.set('transparency',0.2,'bb')
pymol.cmd.set_view ('''
     0.409596264,    0.825154960,    0.389035106,\
    -0.496200919,    0.559361875,   -0.664000809,\
    -0.765517235,    0.078932054,    0.638556123,\
     0.000000000,    0.000000000,  -44.314689636,\
    31.154973984,   23.909875870,   15.216966629,\
    34.938037872,   53.691341400,  -20.000000000 ''')

pymol.cmd.png("my_image.png")

# Get out!
pymol.cmd.quit()
